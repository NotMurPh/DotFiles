#!/bin/bash
done=false
while [ true ]
do
	if [[ "$(bspc query -T -n focused | jq ".client .tiledRectangle .width")" == "1920" && $done == false ]]; then
		done=true
		# kill apps on fullscreen
		echo "enterd fullscreen"
		pkill picom
		eww close actions spotify info
		pkill imwheel
		echo -e '[Spotify]\n    appname = "Spotify"\n    skip_display = "True"' >> ~/DotFiles/StarryNight/home/murphy/.config/dunst/dunstrc
		pkill dunst
		sudo pkill -USR1 ChatterBlocker

	elif [[ "$(bspc query -T -n focused | jq ".client .tiledRectangle .width")" != "1920" && $done == true ]]; then
		done=false
		# open apps on fullscreen leave
		echo "left fullscreen"
		picom -b
		eww open-many actions spotify info dates > /dev/null 2>&1 && eww reload && init_eww &
		imwheel -b "45" -k
		sed -i "$(( $(wc -l <~/.config/dunst/dunstrc)-3+1 )),$ d" ~/DotFiles/StarryNight/home/murphy/.config/dunst/dunstrc
		pkill dunst
		sudo pkill -USR1 ChatterBlocker

	fi
	sleep 0.2
done

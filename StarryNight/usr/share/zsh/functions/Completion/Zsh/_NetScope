#compdef NetScope

# Completion script for NetScope

function _NetScope() {
    local context state state_descr line
    typeset -A opt_args

    _arguments -C \
        '1:command:->commands' \
        '2:subcommand:->subcommands' \
        '3:argument:_files' && return 0

    if [[ $state == commands ]]; then
        _describe -t commands 'NetScope commands' '(
            "vpn:Manage your VPN connections"
            "route:Manage your direct routes"
            "dns:Switch between DNS servers"
            "cycle:Cycle through your network interfaces"
            "direct:Manage the Direct namespace"
            "isolate:Isolate network interfaces in namespaces"
        )' && return 0
    fi

    case $line[1] in
        vpn)
            _describe -t subcommands 'VPN subcommands' '(
                "on:Enable VPN and open forwarder"
                "off:Disable VPN"
                "reload:Reload VPN settings"
                "kill:Kill VPN forwarder process"
                "close:Close VPN forwarder process"
            )' && return 0
            ;;
        route)
            _describe -t subcommands 'Route subcommands' '(
                "add:Add a new route"
                "remove:Remove an existing route"
                "delete:Delete an existing route"
				"check:Check and synchronize routes with configuration"
            )' && return 0
            ;;
        dns)
            _describe -t subcommands 'DNS subcommands' '(
                "default:Set DNS to default servers (1.1.1.1 and 8.8.8.8)"
                "electro:Set DNS to Electro servers (78.157.42.100 and 78.157.42.101)"
                "shecan:Set DNS to Shecan servers (178.22.122.100 and 185.51.200.2)"
            )' && return 0
            ;;
        cycle)
            _message "No subcommands for cycle" && return 0
            ;;
        direct)
            _describe -t subcommands 'Direct subcommands' '(
                "status:Check the status of the Direct namespace"
                "create:Create the Direct namespace"
                "delete:Delete the Direct namespace"
                "remove:Remove the Direct namespace"
                "exec:Execute a command in the Direct namespace"
                "run:Run a command in the Direct namespace"
            )' && return 0
            ;;
        isolate)
            _describe -t subcommands 'Isolate subcommands' '(
                "status:Check the status of isolate namespaces"
                "create:Add an isolate namespace"
                "add:Add an isolate namespace"
                "delete:Remove an isolate namespace"
                "remove:Remove an isolate namespace"
                "exec:Execute a command in an isolate namespace"
                "run:Run a command in an isolate namespace"
            )' && return 0
            ;;
        *)
            _message "Unknown command: $line[1]"
            ;;
    esac
}

_NetScope "$@"
